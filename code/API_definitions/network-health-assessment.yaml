openapi: 3.0.3
info:
  title: Network Health Assessment
  x-camara-commonalities: 0.6
  description: |
    Network Insight offers a unified analytical platform for specific networks, such as private networks and slices, focusing exclusively on aggregated network-level data rather than individual device information.
    It empowers users to both evaluate the overall network health through a comprehensive, component-based scoring system and to analyze service traffic patterns with customizable granularity.
    By providing a holistic view — from infrastructure health to user traffic trends — this API suite delivers the critical, real-time data needed for comprehensive network monitoring, strategic performance optimization, and effective early warning systems.

    # Introduction

    This API allows users to query the health score of a specified network, which consists of multiple components including the wireless network, transmission network, and core network.
    By calculating the health score for each component and then applying weighted calculations, the API provides a comprehensive health score result for the specified network.

    # API functionality

    The API provides the following functionality:
    - Query the health scores of different network modules in the specify network at the latest point in time.

    # Request Parameters Definition:
    * **module**: Modules within the network. Optional parameters are: net (the entire network), net_wireless (wireless network), net_transnet (transport network), net_core (core network).

    # Authorization and authentication

    The "Camara Security and Interoperability Profile" provides details of how an API consumer requests an access token. Please refer to Identity and Consent Management (https://github.com/camaraproject/IdentityAndConsentManagement/) for the released version of the profile.

    The specific authorization flows to be used will be agreed upon during the onboarding process, happening between the API consumer and the API provider, taking into account the declared purpose for accessing the API, whilst also being subject to the prevailing legal framework dictated by local legislation.

    In cases where personal data is processed by the API and users can exercise their rights through mechanisms such as opt-in and/or opt-out, the use of three-legged access tokens is mandatory. This ensures that the API remains in compliance with privacy regulations, upholding the principles of transparency and user-centric privacy-by-design.

    This API requires users to provide user information via request header signature authentication. By using the AccessKeyId (user account), SignatureNonce (random unique identifier), Version (date identifier), Timestamp (timestamp), and Signature (calculated from other request headers using an encryption algorithm) fields in the request headers, the API verifies the Signature. Upon verification, the API accepts the value in AccessKeyId as the user identity to match user data.

    # Additional CAMARA error responses

    The list of error codes in this API specification is not exhaustive. Therefore the API specification may not document some non-mandatory error statuses as indicated in `CAMARA API Design Guide`.

    Please refer to the `CAMARA_common.yaml` of the Commonalities Release associated to this API version for a complete list of error responses. The applicable Commonalities Release can be identified in the `API Readiness Checklist` document associated to this API version.

    As a specific rule, error `501 - NOT_IMPLEMENTED` can be only a possible error response if it is explicitly documented in the API.
  version: vwip
  contact:
    email: sp-network-insights@lists.camaraproject.org
  license:
    name: Apache 2.0
    url: https://www.apache.org/licenses/LICENSE-2.0.html
externalDocs:
  description: Project documentation at CAMARA
  url: https://github.com/camaraproject/NetworkInsights
servers:
  - url: '{apiRoot}/network-health-assessment/vwip'
    variables:
      apiRoot:
        default: http://localhost:9091
        description: API root
tags:
  - name: Network lastest Score
    description: This API allows users to query the health score of a specified network, which consists of multiple components including the wireless network, transmission network, and core network. By calculating the health score for each component and then applying weighted calculations, the API provides a comprehensive health score result for the specified network.
paths:
  /network-score-lastest:
    get:
      tags:
        - Network lastest Score
      summary: Query the latest time point network health score.
      description: |
        Query the health assessment results of the network.
        - The health score at the latest time point.
      operationId: struct
      security:
        - openId:
            - network-insights:score:check
      parameters:
        - in: header
          name: SignatureNonce
          required: true
          description: A Universally Unique Identifier (UUID) for the specific item.
          schema:
            type: string
        - in: header
          name: Version
          required: true
          description: The date in yyyy-MM-dd format.
          schema:
            type: string
        - in: header
          name: AccessKeyId
          required: true
          description: The customer’s account name on the network management platform.
          schema:
            type: string
        - in: header
          name: Timestamp
          required: true
          description: The timestamp of the event in UTC.
          schema:
            type: string
        - in: header
          name: Signature
          required: true
          description: An encrypted result string generated from other request headers and a secret key, used for request validation.
          schema:
            type: string
        - in: query
          name: structCode
          required: true
          description: module of Network
          schema:
            type: string
            enum: [net, net_wireless, net_transnet, net_core]
            example: net_wireless
      responses:
        '200':
          description: Successful response with the network score struct.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    type: integer
                    description: The status code of the response.
                  message:
                    type: string
                    description: A message indicating the success of the query.
                  data:
                    type: object
                    properties:
                      time:
                        type: string
                        description: The time of the score create.
                      valid:
                        type: integer
                        description: The validity of the score.
                      value:
                        type: string
                        description: The score of the health.
        '400':
          $ref: '#/components/responses/Generic400'
components:
  securitySchemes:
    openId:
      type: openIdConnect
      description: Common security scheme for all CAMARA APIs
      openIdConnectUrl: https://example.com/.well-known/openid-configuration
  headers:
    x-correlator:
      description: Correlation id for the different services
      schema:
        $ref: "#/components/schemas/XCorrelator"
  schemas:
    XCorrelator:
      type: string
      pattern: ^[a-zA-Z0-9-_:;.\/<>{}]{0,256}$
      example: "b4333c46-49c0-4f62-80d7-f0ef930f1c46"
    ErrorInfo:
      type: object
      description: Error information
      required:
        - status
        - code
        - message
      properties:
        status:
          type: integer
          description: HTTP response status code
        code:
          type: string
          description: A human-readable code to describe the error
        message:
          type: string
          description: A human-readable description of what the event represents
  responses:
    Generic400:
      description: Problem with the client request
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ErrorInfo'
          example:
            status: 400
            code: UNAUTHENTICATED
            message: "Example of missing required query parameter"
